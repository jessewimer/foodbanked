{% extends 'base.html' %}
{% load static %}

{% block title %}Locations - FoodBanked{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<link rel="stylesheet" href="{% static 'css/locations.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
{% endblock %}

{% block content %}
<div class="locations-page">
    <!-- Header Section -->
    <div class="locations-header">
        <div class="container">
            <h1 class="header-title">Our Community</h1>
            <p class="header-subtitle">
                Serving food banks nationwide with simple, affordable technology
            </p>
            <div class="header-stats">
                <div class="stat-badge">
                    <i class="fas fa-map-marker-alt"></i>
                    <span class="stat-number">{{ total_locations }}</span>
                    <span class="stat-label">Location{{ total_locations|pluralize }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Search Section -->
    <div class="search-section">
        <div class="container">
            <div class="search-container">
                <div class="search-input-wrapper">
                    <i class="fas fa-search search-icon"></i>
                    <input 
                        type="text" 
                        id="locationSearch" 
                        class="search-input" 
                        placeholder="Search for a food bank or organization..."
                        autocomplete="off"
                    >
                </div>
                <div id="searchResults" class="search-results" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- Map Section -->
    <div class="map-section">
        <div class="container-fluid">
            <div id="map"></div>
        </div>
    </div>

    <!-- Legend -->
    <div class="map-legend">
        <div class="container">
            <div class="legend-items">
                <div class="legend-item">
                    <i class="fas fa-store legend-icon" style="color: #d97706;"></i>
                    <span>Food Banks</span>
                </div>
                <div class="legend-item">
                    <i class="fas fa-building legend-icon" style="color: #0284c7;"></i>
                    <span>Organizations</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Hidden data for JavaScript -->
<script id="locations-data" type="application/json">
{
    "foodbanks": {{ foodbanks_json|safe }},
    "organizations": {{ organizations_json|safe }}
}
</script>
{% endblock %}

{% block extra_js %}
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="{% static 'js/locations.js' %}"></script>
{% endblock %}